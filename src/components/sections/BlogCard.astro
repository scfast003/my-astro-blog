---
import Card from '../../components/Card.astro';
import { getCollection } from "astro:content";

const posts = await getCollection("posts");
// 获取最新的一篇文章
const latestPost = posts.sort((a, b) => new Date(b.data.pubDate).valueOf() - new Date(a.data.pubDate).valueOf())[0];
---

<Card colSpan="md:col-span-1 lg:col-span-2" rowSpan="md:row-span-1 lg:row-span-1" href={`/posts/${latestPost?.slug || ''}`}>
  <div class="flex flex-col justify-between h-full p-4 group">
    <div class="flex flex-col gap-2">
       <div class="flex items-center justify-between">
         <span class="text-xs font-bold text-orange-500 uppercase tracking-wider bg-orange-100 dark:bg-orange-900/30 px-2 py-0.5 rounded">LATEST POST</span>
       </div>
       
       <h3 class="text-lg font-bold text-gray-800 dark:text-gray-100 line-clamp-2 group-hover:text-primary transition-colors">
         {latestPost ? latestPost.data.title : "暂无文章"}
       </h3>
       
       <p class="text-sm text-gray-500 dark:text-gray-400 line-clamp-2">
         {latestPost ? latestPost.data.description : "写点什么吧..."}
       </p>
    </div>
    
    <div class="flex items-center justify-between mt-4">
      <span class="text-xs text-gray-400">
        {latestPost ? new Date(latestPost.data.pubDate).toLocaleDateString() : ""}
      </span>
      <span class="text-sm font-medium text-primary group-hover:translate-x-1 transition-transform">
        阅读更多 &rarr;
      </span>
    </div>
  </div>
</Card>
