---
import BaseLayout from '../layouts/BaseLayout.astro';
// å¼•å…¥åˆšæ‰åšå¥½çš„æ¼‚äº®å¡ç‰‡
import IntroCard from '../components/sections/IntroCard.astro';
import Card from '../components/Card.astro'; 
import { bookmarks } from '../data/bookmarks'; 

// è·å–æœ€æ–°çš„åšå®¢æ–‡ç« ï¼ˆè§£å†³åšå®¢æ ‡é¢˜ä¸æ˜¾ç¤ºçš„é—®é¢˜ï¼‰
import { getCollection } from "astro:content";
const posts = await getCollection("posts");
// åªå–æœ€æ–°çš„ 1 ç¯‡æ¥å±•ç¤º
const latestPost = posts.sort((a, b) => new Date(b.data.pubDate) - new Date(a.data.pubDate))[0];
---

<BaseLayout title="Tigerçš„é¦–é¡µ" description="æˆ‘çš„ä¸ªäººä¸»é¡µ">
  <div class="grid grid-cols-1 gap-4 p-4 md:grid-cols-4 md:grid-rows-2 h-full">
    
    <IntroCard />

    <Card colSpan="md:col-span-1" rowSpan="md:row-span-1" href={`/posts/${latestPost?.slug || ''}`}>
      <div class="p-6 h-full flex flex-col justify-between hover:bg-primary/5 transition-colors cursor-pointer">
        <div class="flex flex-col gap-2">
           <span class="text-xs font-bold text-primary uppercase tracking-wider">LATEST POST</span>
           <h3 class="text-lg font-bold line-clamp-3">
             {latestPost ? latestPost.data.title : "æš‚æ— æ–‡ç« "}
           </h3>
           <span class="text-xs text-gray-500">
             {latestPost ? new Date(latestPost.data.pubDate).toLocaleDateString() : ""}
           </span>
        </div>
        <div class="text-sm font-medium mt-4">é˜…è¯»æ›´å¤š &rarr;</div>
      </div>
    </Card>

    <Card colSpan="md:col-span-3" rowSpan="md:row-span-1" href="/bookmarks">
      <div class="p-6 h-full flex flex-col justify-between">
        <div class="flex items-center gap-2 mb-2">
            <span class="text-2xl">â­</span>
            <h2 class="text-xl font-bold">å¸¸ç”¨å·¥å…· & æ”¶è—</h2>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
            {bookmarks && bookmarks.slice(0, 3).map((item) => (
              <div class="p-3 rounded-lg bg-gray-50 dark:bg-gray-800/50 text-sm truncate border border-gray-100 dark:border-gray-800">
                <span class="font-medium text-gray-700 dark:text-gray-200">{item.title}</span>
              </div>
            ))}
        </div>
      </div>
    </Card>

    <Card colSpan="md:col-span-1" rowSpan="md:row-span-1" href="/projects">
      <div class="p-6 h-full flex flex-col justify-center items-center text-center group">
        <h2 class="text-xl font-bold group-hover:scale-105 transition-transform">ğŸ› ï¸ æˆ‘çš„é¡¹ç›®</h2>
        <p class="text-xs text-gray-500 mt-2">æŸ¥çœ‹å¼€æºä½œå“</p>
      </div>
    </Card>

  </div>
</BaseLayout>
